<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- BIR Compliance Security Groups -->
    <record id="module_category_bir" model="ir.module.category">
        <field name="name">BIR Compliance</field>
        <field name="description">Philippine Tax Compliance Management</field>
        <field name="sequence">30</field>
    </record>

    <record id="group_bir_user" model="res.groups">
        <field name="name">Tax Preparer</field>
        <field name="category_id" ref="module_category_bir"/>
        <field name="implied_ids" eval="[(4, ref('base.group_user'))]"/>
        <field name="comment">Can prepare and view BIR filings</field>
    </record>

    <record id="group_bir_reviewer" model="res.groups">
        <field name="name">Tax Reviewer</field>
        <field name="category_id" ref="module_category_bir"/>
        <field name="implied_ids" eval="[(4, ref('group_bir_user'))]"/>
        <field name="comment">Can review BIR filings</field>
    </record>

    <record id="group_bir_manager" model="res.groups">
        <field name="name">Tax Manager</field>
        <field name="category_id" ref="module_category_bir"/>
        <field name="implied_ids" eval="[(4, ref('group_bir_reviewer'))]"/>
        <field name="comment">Can approve and manage all BIR filings</field>
    </record>

    <!-- Record Rules -->
    <record id="bir_filing_company_rule" model="ir.rule">
        <field name="name">BIR Filing: Company</field>
        <field name="model_id" ref="model_ipai_bir_filing"/>
        <field name="domain_force">[('company_id', 'in', company_ids)]</field>
    </record>

    <record id="bir_schedule_company_rule" model="ir.rule">
        <field name="name">BIR Schedule: Company</field>
        <field name="model_id" ref="model_ipai_bir_filing_schedule"/>
        <field name="domain_force">[('company_id', 'in', company_ids)]</field>
    </record>
</odoo>
